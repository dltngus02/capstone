{"ast":null,"code":"import _slicedToArray from\"C:/Users/leesuhyeon/Desktop/2024 1\\uD559\\uAE30 \\uACFC\\uC81C/\\uCEA1\\uB514/\\uCEA1\\uB5142/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useReducer,useCallback,useState}from\"react\";import{useNavigation}from\"../../Router/Router\";import Axios from'axios';import\"./css/ItemCounter.css\";import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ItemCount=function ItemCount(_ref){var mockData=_ref.mockData,allData=_ref.allData;var _useNavigation=useNavigation(),onClickStart=_useNavigation.onClickStart,onClickOwner=_useNavigation.onClickOwner,onClickPay=_useNavigation.onClickPay,onClickDone=_useNavigation.onClickDone,onClickMain=_useNavigation.onClickMain,onClickRec=_useNavigation.onClickRec;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),ttsEnabled=_useState2[0],setTtsEnabled=_useState2[1];var sumAmount=mockData.reduce(function(total,data){return total+data.amount;},0);var sumPrice=mockData.reduce(function(total,data){return total+data.price*data.amount;},0);useEffect(function(){var ttsState=sessionStorage.getItem(\"ttsEnabled\");if(ttsState){setTtsEnabled(JSON.parse(ttsState));}},[]);var handleMouseEnter=function handleMouseEnter(event){if(ttsEnabled){var tts_script=event.target.innerText;var utterance=new SpeechSynthesisUtterance(tts_script);// SpeechSynthesisUtterance 객체 생성\nwindow.speechSynthesis.speak(utterance);// TTS 실행\n}};var navigate=useNavigate();var url=\"/pay?amount=\".concat(sumPrice);var onClickEvent=function onClickEvent(){sendDataToFlask();onClickRec();};var sendDataToFlask=function sendDataToFlask(){//navigate(url);\nfetch('/send_data',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(allData)}).then(function(response){return response.json();}).then(function(data){console.log(data.message);}).catch(function(error){console.log(error);});};document.cookie=\"sumprice=\".concat(sumPrice,\"; path=/\");return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"counterBack\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"counterButton\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"numContainer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"numdiv\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"allAmount\",children:\"\\uC218\\uB7C9\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"sumAmount\",children:[sumAmount,\"\\uAC1C\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"priceContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"allsum\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"allPrice\",children:\" \\uCD1D \\uAE08\\uC561\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"sumPrice\",children:[sumPrice,\"\\uC6D0\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"payButton\",onClick:onClickEvent,onMouseEnter:handleMouseEnter,children:\"\\uACB0\\uC81C\\uD558\\uAE30\"})]})]})})]});};export default ItemCount;","map":{"version":3,"names":["React","useEffect","useReducer","useCallback","useState","useNavigation","Axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ItemCount","_ref","mockData","allData","_useNavigation","onClickStart","onClickOwner","onClickPay","onClickDone","onClickMain","onClickRec","_useState","_useState2","_slicedToArray","ttsEnabled","setTtsEnabled","sumAmount","reduce","total","data","amount","sumPrice","price","ttsState","sessionStorage","getItem","JSON","parse","handleMouseEnter","event","tts_script","target","innerText","utterance","SpeechSynthesisUtterance","window","speechSynthesis","speak","navigate","url","concat","onClickEvent","sendDataToFlask","fetch","method","headers","body","stringify","then","response","json","console","log","message","catch","error","document","cookie","children","className","onClick","onMouseEnter"],"sources":["C:/Users/leesuhyeon/Desktop/2024 1학기 과제/캡디/캡디2/front/src/component/page/item/ItemCount.jsx"],"sourcesContent":["import React, { useEffect, useReducer, useCallback, useState } from \"react\";\r\nimport { useNavigation } from \"../../Router/Router\";\r\nimport Axios from 'axios';\r\nimport \"./css/ItemCounter.css\";\r\nimport { useNavigate } from 'react-router-dom';\r\nconst ItemCount = ({ mockData,allData }) => {\r\n  const { onClickStart, onClickOwner, onClickPay, onClickDone, onClickMain,onClickRec } =\r\n    useNavigation();\r\n    const [ttsEnabled, setTtsEnabled] = useState(false);\r\n  const sumAmount = mockData.reduce((total, data) => total + data.amount, 0);\r\n  const sumPrice = mockData.reduce(\r\n    (total, data) => total + data.price * data.amount,\r\n    0\r\n  );\r\n  useEffect(() => {\r\n    const ttsState = sessionStorage.getItem(\"ttsEnabled\");\r\n    if (ttsState) {\r\n      setTtsEnabled(JSON.parse(ttsState));\r\n    }\r\n  }, []);\r\n  const handleMouseEnter = (event) => {\r\n    if (ttsEnabled) {\r\n      const tts_script = event.target.innerText;\r\n      const utterance = new SpeechSynthesisUtterance(tts_script); // SpeechSynthesisUtterance 객체 생성\r\n      window.speechSynthesis.speak(utterance); // TTS 실행\r\n    }\r\n  };\r\n  const navigate = useNavigate();\r\n  const url = `/pay?amount=${sumPrice}`; \r\n  const onClickEvent = () => {\r\n    sendDataToFlask();\r\n    onClickRec();\r\n  }\r\n  const sendDataToFlask = () => {\r\n    //navigate(url);\r\n    fetch('/send_data', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(allData),\r\n    })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        console.log(data.message);\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n      });\r\n  };\r\n  document.cookie = `sumprice=${sumPrice}; path=/`;\r\n\r\n  return (\r\n    <>\r\n      <hr />\r\n      <div className=\"counterBack\" >\r\n        <div className=\"counterButton\">\r\n          <div className=\"numContainer\">\r\n            <div className=\"numdiv\">\r\n            <p className=\"allAmount\">수량</p>\r\n            <p className=\"sumAmount\">{sumAmount}개</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"priceContainer\">\r\n              <div className=\"allsum\">\r\n                <p className=\"allPrice\"> 총 금액</p>\r\n                <p className=\"sumPrice\">{sumPrice}원</p>\r\n              </div>\r\n              <button className=\"payButton\" onClick={onClickEvent} onMouseEnter={handleMouseEnter}>\r\n                  결제하기\r\n                </button>\r\n \r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\nexport default ItemCount;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}